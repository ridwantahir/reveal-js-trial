<!DOCTYPE html>
<html>

<head>
    <title>SVG.js</title>
    <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="js-extra/svg-inject.js"></script>
</head>


<body>
    <svg class="data-svg-motion" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="568px" height="409px" viewBox="-0.5 -0.5 568 409" content="&lt;mxfile&gt;&lt;diagram id=&quot;4_xAO81MvXytq20LTa4a&quot; name=&quot;Page-1&quot;&gt;7Vptb9s2EP41AbYPESTqxc7Hxom7DxtQoAPWfjJoiZa5SKJK0m/99TtKlEWRStK47masjoFIPJ4o3j3PHY+0b8JZuX/Pcb3+g2WkuEF+tr8JH24QCvwogYuSHFpJHMStIOc000q94CP9SrontXRDMyIGipKxQtJ6KExZVZFUDmSYc7Ybqq1YMXxrjXPiCD6muHClf9FMrlvpFE16+W+E5uvuzUFy1/aUuFPWlog1ztjOEIWPN+GMMybbu3I/I4VyXueX9rn5M73HiXFSyZEH2PJv5Q/kF3gJmDQKemZMUlbddgNl1W1JhFB+aLqfyGHFcUlurTcdm/3kj5MS8tA5TEjOno6+AsV7tpEFrcjsiJAPwgyLNcl0Axc0r+A+BVMIB8GKVVJzYaqatChmrGC8eUWY+qsY34F8S7ikgNXvysQPTFBlGOgsmZSsNBTe6RdIVoMUkKjV0OU+V6T1CK09Um1JwWqy2IGobibRmq2GIPtnfR4YznhPWEkkP4BK90Co2a7ZjzoMdj2XuoBYmzSKNIM1e/PjyD3AcKP93zU15GeG/86Cf3KF/3T4Exd+5I0RwL8cAsQWAcIrAb6VAHESDQgQTnyHAKHvwo++G35nvdAobnGxISYbDOhGgVJQGL6Hz1y94B5cl1HS91WsIi5UMZrM53Pl84YWlvKABCeC6XBnLUtF92BIowB1bW1vwztRt4au6F7N475mVI3yuIXBhB7EZgveicjjmViUB/GlWNBKSFylZIELeSbSRP6QNIlLmsnUJU0newNpHJZ0szVYQTIoiHRT42a4mOyp/KTcCVmsbX3WzlX3D3uzcTAaHwinMDuFWCurYKafzMbnflTV7IdqWgezZQ/W2qAm/jIEYCfb8NQqOSXmOenUJuNQcVJgSbfD8b/L8a+Hp8tWw2wYDUpiYnjCRMkJkmMx6uRiUeOUVvmfKrgeQhDQsimRu+sDLXMwpqBL+I9T5YRFRjnMjCmL5zmpYA7pQhAOUeCJbX6mqIgTLxnERZBMnbiIIm8kMqZvT6cOQOHrANmZIqUiZV7KynoDXhcLXGULhVm9JhwXwtuR5WKptig2XGNpaACSlWX9MJneTZwsCz2r5u/YYy7L58q3o6vGGQAPw2EaDCZu8ZQgF+zk7bXzeK2UNAldrRkDmJMvG9Z13IpmdXkHCnFc7+HS2O4vcfqUc7apstu0BUOp8Hz5C/BYaSGYgm/d/9qP3WxoOxB7Yeg3f6YoydX1YxNs8NSsUGsy3OideKIXpXlrRqv9XBkoqSyeKwL9YRGYvFgDAujyuTV/fHlGkbU8ByMELGmWqc6RetGKh9ZNwE2VzOThfKQMEmttdpfmGI0UdMElFfRoiOX0Ws+fuqELYjcn/Zh6/hwpKkz+1ynKOqe6u6wUNUxFVgQgrD7n4Siytg/RyJZzjKOBf0EpKhxiGQQvgnnNUWbdFFllcuSWyf9mjjoF/siCH13hP/XIKRiL/wuHP7Hgj67w/0zwTyz44yv8P1Pyn1rwv7zXvMJ/EfsT9/tp/b3hxZwko//6KNkfh+7sR8l6AXjppPJVIhu4fOMx4OhOyjmXuX+co5GIwF83nHgbcbY4CEIvCIehMEVOKMSJh0a+fI1P+va9/yVH02f8HiZ8/Ac=&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><g id="cell-10" content="&lt;object label=&quot;&quot; motion-id=&quot;dn-message&quot; keyframe-id=&quot;1&quot;/&gt;" data-label="" data-motion-id="dn-message" data-keyframe-id="1"><rect x="22" y="192" width="15" height="14" fill="#c0f5a9" stroke="#000000" stroke-width="2" pointer-events="all"/><rect x="25.7" y="195.42" width="7.6" height="7.16" fill="#ffe040" stroke="#000000" pointer-events="all"/><path d="M 25.7 195.42 L 29.5 199 L 33.3 195.42" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><g id="cell-17" content="&lt;object label=&quot;&quot; motion-id=&quot;dn-message&quot; keyframe-id=&quot;9&quot;/&gt;" data-label="" data-motion-id="dn-message" data-keyframe-id="9"><rect x="22" y="196" width="12.5" height="10" fill="#c0f5a9" stroke="#000000" stroke-width="2" pointer-events="all"/><rect x="25.08" y="198.44" width="6.33" height="5.11" fill="#ffe040" stroke="#000000" pointer-events="all"/><path d="M 25.08 198.44 L 28.25 201 L 31.42 198.44" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><g id="cell-13" content="&lt;object label=&quot;&quot; motion-id=&quot;dn-message&quot; keyframe-id=&quot;5&quot;/&gt;" data-label="" data-motion-id="dn-message" data-keyframe-id="5"><rect x="451" y="340" width="30" height="20" fill="#c0f5a9" stroke="#000000" stroke-width="2" pointer-events="all"/><rect x="458.4" y="344.89" width="15.2" height="10.22" fill="#ffe040" stroke="#000000" pointer-events="all"/><path d="M 458.4 344.89 L 466 350 L 473.6 344.89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><g id="cell-5"><rect x="427" y="330" width="78" height="78" fill="none" stroke="none" pointer-events="all"/><path d="M 488.48 354.64 L 493.24 354.64 L 493.24 356.88 L 485.66 356.88 L 485.66 342.91 L 488.48 342.91 Z M 479.69 353.63 C 479.23 354.48 478.56 354.9 477.68 354.9 C 476.79 354.9 476.12 354.48 475.66 353.63 C 475.2 352.79 474.97 351.54 474.97 349.88 C 474.97 348.19 475.2 346.93 475.64 346.11 C 476.08 345.29 476.76 344.88 477.68 344.88 C 478.59 344.88 479.27 345.29 479.71 346.11 C 480.16 346.93 480.38 348.19 480.38 349.88 C 480.38 351.54 480.15 352.79 479.69 353.63 Z M 482.36 354.38 C 482.97 353.18 483.28 351.68 483.28 349.88 C 483.28 347.57 482.79 345.78 481.81 344.51 C 480.82 343.24 479.45 342.61 477.68 342.61 C 475.9 342.61 474.52 343.24 473.54 344.51 C 472.56 345.78 472.07 347.57 472.07 349.88 C 472.07 352.14 472.53 353.91 473.46 355.18 C 474.39 356.45 475.7 357.11 477.39 357.18 C 478.09 358.01 478.93 358.71 479.91 359.26 C 480.89 359.81 481.92 360.17 482.98 360.33 L 482.98 358.03 C 482.24 357.95 481.61 357.81 481.1 357.63 C 480.59 357.43 480.13 357.18 479.71 356.84 C 480.87 356.4 481.75 355.57 482.36 354.38 Z M 470.06 351.35 C 470.26 351.81 470.36 352.37 470.36 353.03 C 470.36 354.31 469.94 355.32 469.12 356.06 C 468.29 356.81 467.15 357.18 465.7 357.18 C 465.07 357.18 464.44 357.11 463.8 356.96 C 463.17 356.81 462.64 356.62 462.21 356.37 L 462.21 354.26 C 462.71 354.45 463.27 354.6 463.89 354.73 C 464.52 354.86 465.05 354.92 465.5 354.92 C 466.14 354.92 466.63 354.77 466.97 354.47 C 467.3 354.17 467.47 353.73 467.47 353.17 C 467.47 352.75 467.35 352.4 467.12 352.11 C 466.89 351.82 466.49 351.53 465.94 351.23 L 464.85 350.65 C 463.86 350.11 463.14 349.53 462.71 348.91 C 462.28 348.3 462.07 347.54 462.07 346.66 C 462.07 345.84 462.26 345.12 462.63 344.51 C 463.01 343.9 463.52 343.43 464.17 343.1 C 464.83 342.77 465.58 342.61 466.43 342.61 C 467.49 342.61 468.54 342.85 469.59 343.33 L 469.59 345.47 C 468.5 345.06 467.54 344.86 466.71 344.86 C 466.14 344.86 465.7 345 465.38 345.28 C 465.05 345.57 464.89 345.96 464.89 346.45 C 464.89 346.87 465 347.21 465.2 347.48 C 465.41 347.75 465.81 348.05 466.4 348.37 L 467.49 348.96 C 468.19 349.33 468.75 349.71 469.16 350.08 C 469.57 350.46 469.87 350.88 470.06 351.35 Z M 458.34 346.58 L 461.18 346.58 L 457.77 358.45 C 457.49 359.45 457.12 360.17 456.64 360.61 C 456.17 361.05 455.56 361.27 454.79 361.27 C 454.21 361.27 453.62 361.17 453.02 360.97 L 453.02 359.12 C 453.38 359.17 453.7 359.2 453.98 359.2 C 454.49 359.2 454.88 359.06 455.13 358.8 C 455.39 358.53 455.56 358.08 455.64 357.44 L 455.68 357.08 L 452.35 346.58 L 455.27 346.58 L 456.83 354.16 Z M 447.75 342.91 L 450.9 342.91 L 450.9 356.88 L 448.38 356.88 L 448.38 347.08 L 446.02 353.43 L 443.62 353.43 L 441.28 347.14 L 441.28 356.88 L 438.76 356.88 L 438.76 342.91 L 441.99 342.91 L 444.87 350.73 Z M 501.45 397.72 C 501.45 401.43 498.43 404.45 494.72 404.45 L 437.28 404.45 C 433.57 404.45 430.55 401.43 430.55 397.72 L 430.55 340.28 C 430.55 336.57 433.57 333.55 437.28 333.55 L 494.72 333.55 C 498.43 333.55 501.45 336.57 501.45 340.28 Z M 494.72 330 L 437.28 330 C 431.61 330 427 334.61 427 340.28 L 427 397.72 C 427 403.39 431.61 408 437.28 408 L 494.72 408 C 500.39 408 505 403.39 505 397.72 L 505 340.28 C 505 334.61 500.39 330 494.72 330 Z" fill="#527fff" stroke="none" pointer-events="all"/></g><g id="cell-21"><path d="M 29.5 192 L 26.08 196.11" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 22.72 200.14 L 24.51 192.52 L 26.08 196.11 L 29.89 197 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><g id="cell-2"><image x="443.1" y="137.5" width="44.8" height="80" xlink:href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMjAuODY0IiBoZWlnaHQ9IjM4OS42ODgiIHZpZXdCb3g9IjAgMCA1OC40MzcgMTAzLjEwNSI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJBIiB4MT0iODMuODM5IiB5MT0iMjAwLjM5MyIgeDI9IjgzLjQ3IiB5Mj0iMTI3LjI5NSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzA2NzdmYyIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzhmY2FmZSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJCIiB4MT0iMTExLjI2NiIgeTE9IjIwNi4zMDQiIHgyPSIxMTEuNDgiIHkyPSIxMTguMzcyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjMDUyMzlhIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjOTFiY2Y4Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9IkMiIHgxPSIxMDMuMDgyIiB5MT0iMTM2Ljg5IiB4Mj0iMTAzLjE5NCIgeTI9IjEwNy42MjQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNhOGRlZmUiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMxMmE3ZmMiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzIuNTgzIC0xMDUuNzM4KSI+PHBhdGggZD0iTTEyOS41MiAxODcuNDY4bC0zNi45NjMgMTkuNjY4VjEzNy4yMWwzNi45NjMtMTkuOTM4eiIgZmlsbD0idXJsKCNCKSIvPjxwYXRoIGQ9Ik05Mi41NTcgMjA3LjEzNkw3NC4wODMgMTk2LjkzVjEyNy4xbDE4LjQ3NCAxMC4xMSIgZmlsbD0idXJsKCNBKSIvPjxwYXRoIGQ9Ik0xMjkuNTIgMTE3LjI3Mkw5Mi41NTcgMTM3LjIxIDc0LjA4MyAxMjcuMWwzNi44NDgtMTkuNjYzeiIgZmlsbD0idXJsKCNDKSIvPjxwYXRoIGQ9Ik03OS4zNTUgMTUwLjgzdjEuMzIybDYuNjMgMy42Mzh2LTEuMzIyem0wIDYuNjczdjEuMzIybDYuNjMgMy42Mzh2LTEuMzIyeiIgZG9taW5hbnQtYmFzZWxpbmU9ImF1dG8iIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNOTIuNTU3IDEzNy4yMWwzNi45NjMtMTkuOTM4em0wIDY5LjkyNlYxMzcuMjFMNzQuMDgzIDEyNy4xbTE4LjQ3NCA4MC4wMzZMNzQuMDgzIDE5Ni45M1YxMjcuMWwzNi44NDgtMTkuNjYzIDE4LjU5IDkuODM2djcwLjE5NnoiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIzIi8+PC9nPjwvc3ZnPg=="/></g><g id="cell-3"><rect x="217" y="146" width="62" height="64" fill="none" stroke="none" pointer-events="all"/><path d="M 224.88 197.93 L 225.4 188.49 L 271.12 188.49 L 271.12 197.93 Z M 270.06 210 L 270.06 207.37 L 275.85 198.98 L 275.85 204.22 Z M 270.06 207.37 L 270.06 210 L 217 210 L 217 207.37 Z M 225.4 153.87 L 271.12 153.87 L 271.12 188.49 L 225.4 188.49 Z M 271.12 188.49 L 279 180.62 L 279 146 L 271.12 153.87 Z M 270.06 207.37 L 217 207.37 L 223.31 198.98 L 275.85 198.98 Z M 271.12 197.93 L 271.12 188.49 L 279 180.62 L 279 191.12 Z" fill="#036897" stroke="#ffffff" stroke-width="2" stroke-linejoin="round" stroke-miterlimit="10" pointer-events="all"/><path d="M 232.76 157.53 C 263.24 157.53 263.24 157.53 263.24 157.53 C 265.33 157.53 266.91 159.64 266.91 161.22 C 266.91 180.62 266.91 180.62 266.91 180.62 C 266.91 182.71 265.33 184.29 263.24 184.29 C 232.76 184.29 232.76 184.29 232.76 184.29 C 230.65 184.29 229.08 182.71 229.08 180.62 C 229.08 161.22 229.08 161.22 229.08 161.22 C 229.08 159.64 230.65 157.53 232.76 157.53 Z" fill="#ffffff" stroke="none" pointer-events="all"/><rect x="217" y="146" width="0" height="0" fill="none" stroke="#ffffff" stroke-width="2" pointer-events="all"/><path d="M 279 146 L 234.34 146 L 225.4 153.87 L 271.12 153.87 L 279 146 Z" fill="#036897" stroke="#ffffff" stroke-width="2" stroke-linejoin="round" stroke-miterlimit="10" pointer-events="all"/><path d="M 242.74 163.83 C 236.96 162.79 234.34 165.94 234.86 168.03 C 234.86 168.55 234.86 168.55 234.86 168.55 C 230.13 169.09 231.71 174.33 233.8 174.33 C 233.8 174.33 233.8 174.33 233.8 174.33 C 233.28 177.99 238.53 180.1 241.17 177.99 C 241.17 177.47 241.17 177.47 241.17 177.47 C 242.22 181.14 253.78 181.14 255.87 179.05 C 255.87 179.05 255.87 179.05 255.87 179.05 C 261.14 179.05 263.24 175.9 262.18 173.27 C 262.18 173.27 262.18 173.27 262.18 173.27 C 264.29 172.75 264.29 169.09 261.14 168.55 C 261.66 168.03 261.66 168.03 261.66 168.03 C 262.72 165.94 259.56 163.31 255.87 163.83 C 255.35 163.83 255.35 163.83 255.35 163.83 C 252.2 161.22 243.8 161.22 242.74 163.83 Z" fill="#036897" stroke="none" pointer-events="all"/></g><g id="cell-6" content="&lt;object label=&quot;&amp;lt;font style=&amp;quot;font-size: 55px ; background-color: rgb(255 , 255 , 255)&amp;quot; color=&amp;quot;#000000&amp;quot;&amp;gt;Server Client Model&amp;lt;/font&amp;gt;&quot; motion-id=&quot;dn-title&quot; keyframe-id=&quot;0&quot;/&gt;" data-label="&lt;font style=&quot;font-size: 55px ; background-color: rgb(255 , 255 , 255)&quot; color=&quot;#000000&quot;&gt;Server Client Model&lt;/font&gt;" data-motion-id="dn-title" data-keyframe-id="0"><rect x="47" y="0" width="520" height="110" fill-opacity="0" fill="#000000" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 55px; margin-left: 307px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 24px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap; "><font style="font-size: 55px ; background-color: rgb(255 , 255 , 255)" color="#000000">Server Client Model</font></div></div></div></foreignObject><text x="307" y="62" fill="#000000" font-family="Helvetica" font-size="24px" text-anchor="middle" font-weight="bold">Server Client Model</text></switch></g></g><g id="cell-8" content="&lt;object label=&quot;&quot; motion-id=&quot;dn-message&quot; keyframe-id=&quot;2&quot;/&gt;" data-label="" data-motion-id="dn-message" data-keyframe-id="2"><rect x="22" y="126" width="30" height="20" fill="#c0f5a9" stroke="#000000" stroke-width="2" pointer-events="all"/><rect x="29.4" y="130.89" width="15.2" height="10.22" fill="#ffe040" stroke="#000000" pointer-events="all"/><path d="M 29.4 130.89 L 37 136 L 44.6 130.89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><g id="cell-9" content="&lt;object label=&quot;&amp;lt;font style=&amp;quot;font-size: 36px ; background-color: rgb(255 , 255 , 255)&amp;quot; color=&amp;quot;#000000&amp;quot;&amp;gt;Server Client Model&amp;lt;/font&amp;gt;&quot; motion-id=&quot;dn-title&quot; keyframe-id=&quot;1&quot;/&gt;" data-label="&lt;font style=&quot;font-size: 36px ; background-color: rgb(255 , 255 , 255)&quot; color=&quot;#000000&quot;&gt;Server Client Model&lt;/font&gt;" data-motion-id="dn-title" data-keyframe-id="1"><rect x="127" y="10" width="330" height="100" fill-opacity="0" fill="#2a2a2a" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 60px; margin-left: 292px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 24px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; font-weight: bold; white-space: nowrap; "><font style="font-size: 36px ; background-color: rgb(255 , 255 , 255)" color="#000000">Server Client Model</font></div></div></div></foreignObject><text x="292" y="67" fill="#000000" font-family="Helvetica" font-size="24px" text-anchor="middle" font-weight="bold">Server Client Model</text></switch></g></g><g id="cell-11" content="&lt;object label=&quot;&quot; motion-id=&quot;dn-message&quot; keyframe-id=&quot;3&quot;/&gt;" data-label="" data-motion-id="dn-message" data-keyframe-id="3"><rect x="233" y="118" width="30" height="20" fill="#c0f5a9" stroke="#000000" stroke-width="2" pointer-events="all"/><rect x="240.4" y="122.89" width="15.2" height="10.22" fill="#ffe040" stroke="#000000" pointer-events="all"/><path d="M 240.4 122.89 L 248 128 L 255.6 122.89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><g id="cell-12" content="&lt;object label=&quot;&quot; motion-id=&quot;dn-message&quot; keyframe-id=&quot;4&quot;/&gt;" data-label="" data-motion-id="dn-message" data-keyframe-id="4"><rect x="451" y="110" width="30" height="20" fill="#c0f5a9" stroke="#000000" stroke-width="2" pointer-events="all"/><rect x="458.4" y="114.89" width="15.2" height="10.22" fill="#ffe040" stroke="#000000" pointer-events="all"/><path d="M 458.4 114.89 L 466 120 L 473.6 114.89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><g id="cell-14" content="&lt;object label=&quot;&quot; motion-id=&quot;dn-message&quot; keyframe-id=&quot;6&quot;/&gt;" data-label="" data-motion-id="dn-message" data-keyframe-id="6"><rect x="451" y="110" width="30" height="20" fill="#c0f5a9" stroke="#000000" stroke-width="2" pointer-events="all"/><rect x="458.4" y="114.89" width="15.2" height="10.22" fill="#ffe040" stroke="#000000" pointer-events="all"/><path d="M 458.4 114.89 L 466 120 L 473.6 114.89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><g id="cell-15" content="&lt;object label=&quot;&quot; motion-id=&quot;dn-message&quot; keyframe-id=&quot;7&quot;/&gt;" data-label="" data-motion-id="dn-message" data-keyframe-id="7"><rect x="233" y="118" width="30" height="20" fill="#c0f5a9" stroke="#000000" stroke-width="2" pointer-events="all"/><rect x="240.4" y="122.89" width="15.2" height="10.22" fill="#ffe040" stroke="#000000" pointer-events="all"/><path d="M 240.4 122.89 L 248 128 L 255.6 122.89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><g id="cell-16" content="&lt;object label=&quot;&quot; motion-id=&quot;dn-message&quot; keyframe-id=&quot;8&quot;/&gt;" data-label="" data-motion-id="dn-message" data-keyframe-id="8"><rect x="22" y="126" width="30" height="20" fill="#c0f5a9" stroke="#000000" stroke-width="2" pointer-events="all"/><rect x="29.4" y="130.89" width="15.2" height="10.22" fill="#ffe040" stroke="#000000" pointer-events="all"/><path d="M 29.4 130.89 L 37 136 L 44.6 130.89" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><g id="cell-19"><path d="M 29.5 192 L 27.77 192.81" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 23.01 195.03 L 27.88 188.9 L 27.77 192.81 L 30.84 195.24 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/></g><g id="cell-4"><path d="M 16.21 167.54 C 16.13 163.46 17.63 159.51 20.39 156.59 C 23.15 153.67 26.93 152.02 30.88 152 C 39.68 152.09 46.87 159 47.19 167.7 C 47.52 171.7 46.19 175.67 43.51 178.66 C 40.83 181.66 37.03 183.43 33 183.56 C 24.08 183.74 16.64 176.64 16.21 167.54 Z M 0.13 206 C 0.48 198.41 3.58 191.33 8.67 186.5 C 12.71 182.85 18.33 182.63 22.57 185.95 C 24.99 187.59 27.65 188.9 30.46 189.87 C 33.36 191.01 36.53 190.82 39.3 189.32 C 40.82 188.65 42.16 187.69 43.25 186.5 C 44.32 185.33 46.17 185.09 47.54 185.95 C 49.97 187.44 52.14 190.06 53.85 193.56 C 55.5 197.53 56.35 201.74 56.38 205.99 Z" fill="#00bef2" stroke="none" pointer-events="all"/></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>
    <div>
        <button onClick="animteMySlide('1')">Fragment 1</button>
        <button onClick="animteMySlide('2')">Fragment 2</button>
        <button onClick="animteMySlide('3')">Fragment 3</button>
        <button onClick="animteMySlide('4')">Fragment 4</button>
        <button onClick="animteMySlide('5')">Fragment 5</button>
    </div>
    <script>
        animMetaData = []

        function unique(item, index, array) {
            return array.indexOf(item) == index;
        }
        const copyAttributesRec = function(baseElmt1, baseElmt2, res, idBase, fragIndx, itertn) {
            let terminalElements = ["circle", "ellipse", "line", "mesh", "path", "polygon", "polyline", "rect", "image", "text", "textPath"]
            let el1 = baseElmt1 //baseElmt1.querySelector(sel1);
            let el2 = baseElmt2 //baseElmt2.querySelector(sel2);
                //let res = []
            if (el1.tagName != el2.tagName) {
                throw `el1 is a ${el1.tagName} , while el2 is a ${el2.tagName}`
            }
            let chldrn1 = el1.childNodes;
            let chldrn2 = el2.childNodes;
            if (chldrn1.length != chldrn2.length) {
                throw `el1 has ${chldrn1.length} childrens while el2 has ${chldrn2.length}`
            }
            if (terminalElements.includes(el1.tagName)) {
                let newId = idBase + "-" + el1.tagName + "-" + itertn
                let animParams = el2.getAttributeNames()
                    .filter(n => !['id', 'data-keyframe-id', 'data-motion-id'].includes(n))
                    .map(a => {
                        oneAnimParam = {}
                        oneAnimParam['element'] = newId
                        oneAnimParam['attr'] = a
                        oneAnimParam['value'] = el2.getAttribute(a)
                        oneAnimParam['duration'] = 3000
                        return oneAnimParam

                    })
                el1.id = newId
                res[fragIndx] = res[fragIndx].concat(animParams)
                return
            }
            if (chldrn1.length == 0) {
                return
            }
            for (let i = 0; i < chldrn1.length; i++) {
                if (chldrn2[i].getAttributeNames) {
                    let newId = idBase + "-cnt-" + chldrn1[i].tagName + "-" + itertn
                    let animParams = chldrn2[i].getAttributeNames()
                        .filter(n => !['id', 'data-keyframe-id', 'data-motion-id'].includes(n))
                        .map(a => {
                            oneAnimParam = {}
                            oneAnimParam['element'] = newId
                            oneAnimParam['attr'] = a
                            oneAnimParam['value'] = chldrn2[i].getAttribute(a)
                            oneAnimParam['duration'] = 3000
                            return oneAnimParam

                        })
                    chldrn1[i].id = newId
                    res[fragIndx] = res[fragIndx].concat(animParams)
                }
                //console.log(chldrn1[i])
                copyAttributesRec(chldrn1[i], chldrn2[i], res, idBase + "-" + itertn, fragIndx, "" + itertn + +"" + i)
            }
        }
        const setupAnimation = function(svg) {
            e1 = svg.select('[data-keyframe-id="1"][data-motion-id="pod1"]').node()
            e2 = svg.select('[data-keyframe-id="2"][data-motion-id="pod1"]').node()
            id1 = e1.getAttribute("data-motion-id") + "-" + e1.getAttribute("data-keyframe-id")
            id2 = e2.getAttribute("data-motion-id") + "-" + e2.getAttribute("data-keyframe-id")
            res = []
            if (e1.tagName == 'g') {
                ch1 = e1.childNodes
                ch2 = e2.childNodes
                for (let i = 0; i < ch1.length; i++) {
                    ch1[i].id = id1 + "-" + i
                    ch2[i].id = id2 + "-" + i
                    res[ch1[i].id] = ch2[i].id
                }
            }
            return res
        }
        const initAll = function() {
            let allSvgAnims = document.querySelectorAll('svg.data-svg-motion')
            for (let i = 0; i < allSvgAnims.length; i++) {
                let curSvgA = allSvgAnims[i]
                let newSvgId = "svg-" + Math.floor((Math.random() * 100) + 1) + "-" + i;
                curSvgA.id = newSvgId
                let withAnimFlags = curSvgA.querySelectorAll('[data-keyframe-id][data-motion-id]')
                let animIds = [...withAnimFlags].map(e => e.getAttribute('data-motion-id').toString().trim()).filter(unique)
                let fragIds = [...withAnimFlags].map(e => parseInt(e.getAttribute('data-keyframe-id').toString().trim())).filter(unique)
                let maxFragId = Math.max(...fragIds)
                console.log(fragIds)
                let curFragAnimations = []
                for (let k = 0; k <= maxFragId; k++) {
                    curFragAnimations[k] = []
                }
                console.log(curFragAnimations)
                animIds.forEach(animId => {
                    let thisObjViews = [...withAnimFlags]
                        .filter(e => e.getAttribute("data-motion-id").toString().trim() === animId)
                        //.filter(e => e === animId).filter(unique)
                        .sort((a, b) => parseInt(a.getAttribute("data-keyframe-id").toString().trim()) - parseInt(b.getAttribute("data-keyframe-id").toString().trim()))
                    let firstKeyFrame = parseInt(thisObjViews[0].getAttribute("data-keyframe-id").toString().trim())

                    thisObjViews
                    //.filter(v => parseInt(v.getAttribute("data-keyframe-id").toString().trim()) != 0)
                        .forEach(e => {
                        let curFragIndexF = parseInt(e.getAttribute("data-keyframe-id").toString().trim())
                        let baseElmt1 = thisObjViews[0]
                        let baseElmt2 = e
                        let idBase = newSvgId + "-" + animId
                        let itertn = ""
                        copyAttributesRec(baseElmt1, baseElmt2, curFragAnimations, idBase, curFragIndexF, itertn)
                    })

                    if (firstKeyFrame != 0) {
                        //thisObjViews[0].setAttribute("opacity", 0)
                        // oneAnimParam = {}
                        // oneAnimParam['element'] = newId
                        // oneAnimParam['attr'] = a
                        // oneAnimParam['value'] = el2.getAttribute(a)
                        // oneAnimParam['duration'] = 3000
                        // let hideProp = {

                        // }
                    }
                    thisObjViews.shift()
                    thisObjViews.forEach(e => e.remove())
                })


                animMetaData[newSvgId] = curFragAnimations
            }
        }
        animteMySlide = function(fragmentIdStr) {
            //console.log(animMetaData)
            let fragmentId = parseInt(fragmentIdStr.trim())
            document.querySelectorAll('svg.data-svg-motion').forEach(e => {
                let curIdd = e.id
                fragMetaData = animMetaData[curIdd][fragmentId]
                let animElts = fragMetaData.map(r => "#" + r['element']).filter(unique) //.filter(a => a == '#pod1--path-00')
                console.log(animElts)
                cssToAnime = (x) => {
                    prts = x.split("-")
                    hed = prts.shift()
                    tal = prts.filter(eb => eb.trim().length > 0).map(ee => ee.charAt(0).toUpperCase() + ee.slice(1)).join("")
                    return hed + tal
                }

                for (let i = animElts.length - 1; i >= 0; i--) {
                    let ue = animElts[i]
                    animProps = {
                        targets: ue,
                        duration: 3000,
                        easing: 'linear'
                    }
                    curA = fragMetaData.filter(a => '#' + a['element'] == ue)
                    curA.forEach(cc => {
                        animProps[cssToAnime(cc['attr']).trim()] = cc['value'].trim()
                    })
                    console.log(animProps)
                    anime(animProps)
                        //reducer = (p, c) => p.transition().delay(0).duration(1000).attr(c['attr'], c['value'])
                        //curA.reduce(reducer, d3.select(ue))
                }
            })
        }
        initAll()
            /*const svg = d3.select('svg');
            const p11 = svg.selectAll('[data-keyframe-id="1"][data-motion-id="pod1"]')
            const p12 = svg.selectAll('[data-keyframe-id="2"][data-motion-id="pod1"]')
            const p13 = svg.selectAll('[data-keyframe-id="3"][data-motion-id="pod1"]')

            let baseElmt1 = svg.selectAll('[data-keyframe-id="1"][data-motion-id="pod1"]').node();
            let baseElmt2 = svg.selectAll('[data-keyframe-id="2"][data-motion-id="pod1"]').node();
            let res1 = []
            res1[0] = []
            let idBase = "pod1"
            let sel1 = '[data-keyframe-id="1"][data-motion-id="pod1"]'
            let sel2 = '[data-keyframe-id="2"][data-motion-id="pod1"]'
            let fragIndx = 0;
            let itertn = "";

            //console.log(document.querySelector("*").tagName)

            copyAttributesRec(
                svg.selectAll('[data-keyframe-id="1"][data-motion-id="pod1"]').node(),
                svg.selectAll('[data-keyframe-id="2"][data-motion-id="pod1"]').node(),
                res1,
                "pod1",
                0,
                ""
            )
            copyAttributesRec(
                svg.selectAll('[data-keyframe-id="1"][data-motion-id="pod1-label"]').node(),
                svg.selectAll('[data-keyframe-id="2"][data-motion-id="pod1-label"]').node(),
                res1,
                "pod1-label",
                0,
                ""
            )
            copyAttributesRec(
                svg.selectAll('[data-keyframe-id="1"][data-motion-id="note1"]').node(),
                svg.selectAll('[data-keyframe-id="2"][data-motion-id="note1"]').node(),
                res1,
                "note1",
                0,
                ""
            )
            copyAttributesRec(
                svg.selectAll('[data-keyframe-id="1"][data-motion-id="london1"]').node(),
                svg.selectAll('[data-keyframe-id="2"][data-motion-id="london1"]').node(),
                res1,
                "london1",
                0,
                ""
            )
            copyAttributesRec(
                svg.selectAll('[data-keyframe-id="1"][data-motion-id="devil1"]').node(),
                svg.selectAll('[data-keyframe-id="2"][data-motion-id="devil1"]').node(),
                res1,
                "devil1",
                0,
                ""
            )

            //i/copyAttributesRec(baseElmt1, baseElmt2, res1, idBase, fragIndx, itertn)
            console.log(res1)
                //console.log(document.getElementById("pod1--path-2"))

            // svg.selectAll("#pod1--path-2")
            //     .transition()
            //     .duration(5000)
            //     .attr("d", "M 519.71 1.91 C 519.01 1.96 518.3 2.13 517.68 2.44 L 490.02 15.64 C 488.56 16.34 487.5 17.66 487.15 19.21 L 480.31 48.91 C 480 50.27 480.26 51.73 481.01 52.92 C 481.15 53.05 481.24 53.19 481.32 53.36 L 500.47 77.15 C 501.49 78.38 503.03 79.13 504.62 79.13 L 535.33 79.13 C 536.92 79.13 538.47 78.38 539.48 77.15 L 558.63 53.32 C 559.6 52.08 560 50.45 559.65 48.91 L 552.81 19.21 C 552.45 17.66 551.4 16.34 549.94 15.64 L 522.27 2.44 C 521.48 2.04 520.6 1.87 519.71 1.91 Z");

            let animElts = res1[0].map(r => "#" + r['element']).filter(unique) //.filter(a => a == '#pod1--path-00')
            console.log(animElts)

            cssToAnime = (x) => {
                prts = x.split("-")
                hed = prts.shift()
                tal = prts.filter(eb => eb.trim().length > 0).map(ee => ee.charAt(0).toUpperCase() + ee.slice(1)).join("")
                return hed + tal
            }

            for (let i = animElts.length - 1; i >= 0; i--) {
                let ue = animElts[i]
                animProps = {
                    targets: ue,
                    duration: 3000,
                    easing: 'linear'
                }
                curA = res1[0].filter(a => '#' + a['element'] == ue)
                curA.forEach(cc => {
                    animProps[cssToAnime(cc['attr']).trim()] = cc['value'].trim()
                })
                console.log(animProps)
                anime(animProps)
                    //reducer = (p, c) => p.transition().delay(0).duration(1000).attr(c['attr'], c['value'])
                    //curA.reduce(reducer, d3.select(ue))
            }*/
            // anime({
            //     targets: 'svg polygon',
            //     duration: 3000,
            //     easing: 'linear',
            //     points: '0,0 100,25 198.8,0 135.7,73.8 198.8,145.2 99.4,123.8 0,145.2 66.7,72.6 '
            // });
            // animElts.forEach(ue => {
            //     curA = res1[0].filter(a => '#' + a['element'] == ue)
            //     reducer = (p, c) => p.transition().duration(1000).attr(c['attr'], c['value'])
            //     curA.reduce(reducer, svg.select(ue))
            // })

        // res1[0].forEach(an => {
        //         // console.log("#" + an['element'])
        //         // console.log(an['duration'])
        //         // console.log(an['attr'])
        //         // console.log(an['value'])
        //         svg.selectAll("#" + an['element'])
        //             .transition()
        //             .duration(5000)
        //             .attr(an['attr'], an['value']);
        //     })
        // res = getThem(svg)
        // for (k in res) {
        //     sl = svg.selectAll("#" + res[k]).node()
        //     console.log(
        //         sl.getAttributeNames()
        //         .filter(n => !['id', 'data-keyframe-id', 'data-motion-id'].includes())
        //         .map(a => a + ': ' + sl.getAttribute(a))
        //     )
        //     let dest = svg.selectAll("#" + res[k]).attr("d")
        //         //console.log(dest)
        //     svg.selectAll("#" + k)
        //         .transition()
        //         .duration(5000)
        //         .attr("d", dest);
        // }
        // console.log(document.getElementById("p123").childNodes.length)
        // console.log(document.getElementById("ccc1").childNodes.length)
        // console.log(document.getElementById("rrr1").childNodes.length)
        // console.log(document.getElementById("ppp1").childNodes.length)
        // console.log(document.getElementById("lll1").childNodes.length)
        // console.log(document.getElementById("eee1").childNodes.length)

        //console.log(p11)
    </script>
</body>

</html>